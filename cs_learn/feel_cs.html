<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何将计算机网络、操作系统、数据结构与算法、计算组成融会贯通？</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/interview/logo.png">
    <link rel="manifest" href="/interview/manifest.json">
    <link rel="apple-touch-icon" href="/interview/icon512_maskable.png">
    <link rel="mask-icon" href="/interview/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script>
          var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?2675818a983a3131404cee835018f016";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
          })();
        </script>
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/interview/assets/css/0.styles.e79fd175.css" as="style"><link rel="preload" href="/interview/assets/js/app.c813ac80.js" as="script"><link rel="preload" href="/interview/assets/js/2.181747c8.js" as="script"><link rel="preload" href="/interview/assets/js/1.1f95d45d.js" as="script"><link rel="preload" href="/interview/assets/js/41.97ae5640.js" as="script"><link rel="prefetch" href="/interview/assets/js/10.046e31ac.js"><link rel="prefetch" href="/interview/assets/js/100.ec6186cc.js"><link rel="prefetch" href="/interview/assets/js/101.2b1ad60d.js"><link rel="prefetch" href="/interview/assets/js/102.760f489e.js"><link rel="prefetch" href="/interview/assets/js/103.0ef392e5.js"><link rel="prefetch" href="/interview/assets/js/104.7aad30e5.js"><link rel="prefetch" href="/interview/assets/js/105.fecbc6fd.js"><link rel="prefetch" href="/interview/assets/js/106.ef11b852.js"><link rel="prefetch" href="/interview/assets/js/107.d85766ce.js"><link rel="prefetch" href="/interview/assets/js/108.67f7d836.js"><link rel="prefetch" href="/interview/assets/js/109.159ffb3b.js"><link rel="prefetch" href="/interview/assets/js/11.6e1b1c97.js"><link rel="prefetch" href="/interview/assets/js/110.3583168a.js"><link rel="prefetch" href="/interview/assets/js/111.64423dee.js"><link rel="prefetch" href="/interview/assets/js/112.833d44d1.js"><link rel="prefetch" href="/interview/assets/js/113.0935cbc6.js"><link rel="prefetch" href="/interview/assets/js/114.fc92e5ba.js"><link rel="prefetch" href="/interview/assets/js/115.41aa9b56.js"><link rel="prefetch" href="/interview/assets/js/116.856e48c0.js"><link rel="prefetch" href="/interview/assets/js/117.5cc83dd3.js"><link rel="prefetch" href="/interview/assets/js/118.10d31e30.js"><link rel="prefetch" href="/interview/assets/js/119.ba9c0cca.js"><link rel="prefetch" href="/interview/assets/js/12.c84dfb3f.js"><link rel="prefetch" href="/interview/assets/js/120.1ebeedb3.js"><link rel="prefetch" href="/interview/assets/js/121.5df8b9e3.js"><link rel="prefetch" href="/interview/assets/js/122.5ff5ec2b.js"><link rel="prefetch" href="/interview/assets/js/123.cdd9b131.js"><link rel="prefetch" href="/interview/assets/js/124.531459af.js"><link rel="prefetch" href="/interview/assets/js/125.277fd06e.js"><link rel="prefetch" href="/interview/assets/js/126.c08db809.js"><link rel="prefetch" href="/interview/assets/js/127.5e88ed35.js"><link rel="prefetch" href="/interview/assets/js/128.89befc3e.js"><link rel="prefetch" href="/interview/assets/js/129.f5ef947c.js"><link rel="prefetch" href="/interview/assets/js/13.e0546597.js"><link rel="prefetch" href="/interview/assets/js/130.b6722abb.js"><link rel="prefetch" href="/interview/assets/js/131.d06f78ea.js"><link rel="prefetch" href="/interview/assets/js/132.3008455a.js"><link rel="prefetch" href="/interview/assets/js/133.61134fed.js"><link rel="prefetch" href="/interview/assets/js/134.d37b6a43.js"><link rel="prefetch" href="/interview/assets/js/135.1c1b1110.js"><link rel="prefetch" href="/interview/assets/js/136.1d9dc025.js"><link rel="prefetch" href="/interview/assets/js/137.fa43fd83.js"><link rel="prefetch" href="/interview/assets/js/138.283dad01.js"><link rel="prefetch" href="/interview/assets/js/139.549da325.js"><link rel="prefetch" href="/interview/assets/js/14.3f5cea37.js"><link rel="prefetch" href="/interview/assets/js/140.eb41452a.js"><link rel="prefetch" href="/interview/assets/js/141.154770fe.js"><link rel="prefetch" href="/interview/assets/js/142.d80f75cd.js"><link rel="prefetch" href="/interview/assets/js/143.1318ed05.js"><link rel="prefetch" href="/interview/assets/js/144.cc5b1a7b.js"><link rel="prefetch" href="/interview/assets/js/145.b73c3808.js"><link rel="prefetch" href="/interview/assets/js/146.f1c5e8bc.js"><link rel="prefetch" href="/interview/assets/js/147.b2f440d7.js"><link rel="prefetch" href="/interview/assets/js/148.c423d578.js"><link rel="prefetch" href="/interview/assets/js/149.f9eaf94e.js"><link rel="prefetch" href="/interview/assets/js/15.7ff4b8c0.js"><link rel="prefetch" href="/interview/assets/js/150.b0009933.js"><link rel="prefetch" href="/interview/assets/js/151.f4e18cb5.js"><link rel="prefetch" href="/interview/assets/js/152.82d6762e.js"><link rel="prefetch" href="/interview/assets/js/153.0d8f7530.js"><link rel="prefetch" href="/interview/assets/js/154.81c45947.js"><link rel="prefetch" href="/interview/assets/js/155.a8cab9bc.js"><link rel="prefetch" href="/interview/assets/js/156.1d4acc99.js"><link rel="prefetch" href="/interview/assets/js/157.e1354fee.js"><link rel="prefetch" href="/interview/assets/js/158.eb7bec25.js"><link rel="prefetch" href="/interview/assets/js/159.7e0b00ba.js"><link rel="prefetch" href="/interview/assets/js/16.2a952e5b.js"><link rel="prefetch" href="/interview/assets/js/160.56b20925.js"><link rel="prefetch" href="/interview/assets/js/161.f972b416.js"><link rel="prefetch" href="/interview/assets/js/162.e5893334.js"><link rel="prefetch" href="/interview/assets/js/163.0d84751b.js"><link rel="prefetch" href="/interview/assets/js/164.7b5151cc.js"><link rel="prefetch" href="/interview/assets/js/165.0aae88d9.js"><link rel="prefetch" href="/interview/assets/js/166.0aac4e24.js"><link rel="prefetch" href="/interview/assets/js/167.739e7288.js"><link rel="prefetch" href="/interview/assets/js/168.253645c9.js"><link rel="prefetch" href="/interview/assets/js/169.76df226e.js"><link rel="prefetch" href="/interview/assets/js/17.1ff956b1.js"><link rel="prefetch" href="/interview/assets/js/170.402e31d3.js"><link rel="prefetch" href="/interview/assets/js/171.18f7b6d2.js"><link rel="prefetch" href="/interview/assets/js/172.a458c983.js"><link rel="prefetch" href="/interview/assets/js/173.3b16da5e.js"><link rel="prefetch" href="/interview/assets/js/174.69027959.js"><link rel="prefetch" href="/interview/assets/js/175.db48c27c.js"><link rel="prefetch" href="/interview/assets/js/176.7e8c95e5.js"><link rel="prefetch" href="/interview/assets/js/177.cf3441f0.js"><link rel="prefetch" href="/interview/assets/js/178.5655816a.js"><link rel="prefetch" href="/interview/assets/js/179.6987ac3c.js"><link rel="prefetch" href="/interview/assets/js/18.3256f17f.js"><link rel="prefetch" href="/interview/assets/js/180.0188a17f.js"><link rel="prefetch" href="/interview/assets/js/181.519a59ff.js"><link rel="prefetch" href="/interview/assets/js/182.242b3133.js"><link rel="prefetch" href="/interview/assets/js/183.54a5f8f9.js"><link rel="prefetch" href="/interview/assets/js/184.af4f25c1.js"><link rel="prefetch" href="/interview/assets/js/185.b61697a6.js"><link rel="prefetch" href="/interview/assets/js/19.7080e96a.js"><link rel="prefetch" href="/interview/assets/js/20.2760311a.js"><link rel="prefetch" href="/interview/assets/js/21.dfe42584.js"><link rel="prefetch" href="/interview/assets/js/22.60c145d0.js"><link rel="prefetch" href="/interview/assets/js/23.fc9a257f.js"><link rel="prefetch" href="/interview/assets/js/24.20a61536.js"><link rel="prefetch" href="/interview/assets/js/25.c0eba41b.js"><link rel="prefetch" href="/interview/assets/js/26.7b2b25d6.js"><link rel="prefetch" href="/interview/assets/js/27.e1a6c9b6.js"><link rel="prefetch" href="/interview/assets/js/28.8964c19b.js"><link rel="prefetch" href="/interview/assets/js/29.a34ad823.js"><link rel="prefetch" href="/interview/assets/js/3.1061a9b3.js"><link rel="prefetch" href="/interview/assets/js/30.0b5cf75e.js"><link rel="prefetch" href="/interview/assets/js/31.b28448e8.js"><link rel="prefetch" href="/interview/assets/js/32.9f701dce.js"><link rel="prefetch" href="/interview/assets/js/33.6a78d427.js"><link rel="prefetch" href="/interview/assets/js/34.a6d9e550.js"><link rel="prefetch" href="/interview/assets/js/35.badc65fc.js"><link rel="prefetch" href="/interview/assets/js/36.7dbd87e9.js"><link rel="prefetch" href="/interview/assets/js/37.59707494.js"><link rel="prefetch" href="/interview/assets/js/38.7bb0385f.js"><link rel="prefetch" href="/interview/assets/js/39.77322fe1.js"><link rel="prefetch" href="/interview/assets/js/4.45665f8a.js"><link rel="prefetch" href="/interview/assets/js/40.8ee4d5a8.js"><link rel="prefetch" href="/interview/assets/js/42.099bead5.js"><link rel="prefetch" href="/interview/assets/js/43.beb377b7.js"><link rel="prefetch" href="/interview/assets/js/44.f7b4b3eb.js"><link rel="prefetch" href="/interview/assets/js/45.e61b91da.js"><link rel="prefetch" href="/interview/assets/js/46.f4aa556f.js"><link rel="prefetch" href="/interview/assets/js/47.a8a00282.js"><link rel="prefetch" href="/interview/assets/js/48.dd920a37.js"><link rel="prefetch" href="/interview/assets/js/49.f9ad33fd.js"><link rel="prefetch" href="/interview/assets/js/5.80ca5834.js"><link rel="prefetch" href="/interview/assets/js/50.3798932f.js"><link rel="prefetch" href="/interview/assets/js/51.9d9f4431.js"><link rel="prefetch" href="/interview/assets/js/52.880a7e32.js"><link rel="prefetch" href="/interview/assets/js/53.41f40714.js"><link rel="prefetch" href="/interview/assets/js/54.d4a82f40.js"><link rel="prefetch" href="/interview/assets/js/55.499d0a8c.js"><link rel="prefetch" href="/interview/assets/js/56.ca6ab39b.js"><link rel="prefetch" href="/interview/assets/js/57.6adfe0d5.js"><link rel="prefetch" href="/interview/assets/js/58.bf6c416f.js"><link rel="prefetch" href="/interview/assets/js/59.b5795831.js"><link rel="prefetch" href="/interview/assets/js/6.b28845f9.js"><link rel="prefetch" href="/interview/assets/js/60.612c2c95.js"><link rel="prefetch" href="/interview/assets/js/61.26030a28.js"><link rel="prefetch" href="/interview/assets/js/62.d4de59db.js"><link rel="prefetch" href="/interview/assets/js/63.c5deba62.js"><link rel="prefetch" href="/interview/assets/js/64.133c8a96.js"><link rel="prefetch" href="/interview/assets/js/65.b047e2fe.js"><link rel="prefetch" href="/interview/assets/js/66.86f26afd.js"><link rel="prefetch" href="/interview/assets/js/67.355c019e.js"><link rel="prefetch" href="/interview/assets/js/68.738ce098.js"><link rel="prefetch" href="/interview/assets/js/69.4c9c4530.js"><link rel="prefetch" href="/interview/assets/js/7.ff4b35fb.js"><link rel="prefetch" href="/interview/assets/js/70.61f108a6.js"><link rel="prefetch" href="/interview/assets/js/71.105a14fb.js"><link rel="prefetch" href="/interview/assets/js/72.d86ee653.js"><link rel="prefetch" href="/interview/assets/js/73.c8b8cedc.js"><link rel="prefetch" href="/interview/assets/js/74.ebc3f37e.js"><link rel="prefetch" href="/interview/assets/js/75.cc3ecbc5.js"><link rel="prefetch" href="/interview/assets/js/76.063a7a59.js"><link rel="prefetch" href="/interview/assets/js/77.e9bbf03a.js"><link rel="prefetch" href="/interview/assets/js/78.ffa399c3.js"><link rel="prefetch" href="/interview/assets/js/79.6644c726.js"><link rel="prefetch" href="/interview/assets/js/80.210c74f8.js"><link rel="prefetch" href="/interview/assets/js/81.db2c1499.js"><link rel="prefetch" href="/interview/assets/js/82.7fdbe7b3.js"><link rel="prefetch" href="/interview/assets/js/83.22452753.js"><link rel="prefetch" href="/interview/assets/js/84.2eaf53a5.js"><link rel="prefetch" href="/interview/assets/js/85.643bd267.js"><link rel="prefetch" href="/interview/assets/js/86.8610be96.js"><link rel="prefetch" href="/interview/assets/js/87.d3b76b81.js"><link rel="prefetch" href="/interview/assets/js/88.236b4504.js"><link rel="prefetch" href="/interview/assets/js/89.fe25dc7f.js"><link rel="prefetch" href="/interview/assets/js/90.a8aca676.js"><link rel="prefetch" href="/interview/assets/js/91.82c6f04d.js"><link rel="prefetch" href="/interview/assets/js/92.c6780432.js"><link rel="prefetch" href="/interview/assets/js/93.6759903b.js"><link rel="prefetch" href="/interview/assets/js/94.33715ab0.js"><link rel="prefetch" href="/interview/assets/js/95.50fbc3e8.js"><link rel="prefetch" href="/interview/assets/js/96.f44f883c.js"><link rel="prefetch" href="/interview/assets/js/97.ebf2a9dd.js"><link rel="prefetch" href="/interview/assets/js/98.c03c1ef8.js"><link rel="prefetch" href="/interview/assets/js/99.2939fb4a.js"><link rel="prefetch" href="/interview/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/interview/assets/css/0.styles.e79fd175.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/interview/" class="home-link router-link-active"><img src="/interview/assets/img/jinx.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="操作系统" class="mobile-dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/os/1_hardware/" class="nav-link">
  硬件系统
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/2_os_structure/" class="nav-link">
  操作系统结构
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/3_memory/" class="nav-link">
  内存管理
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/4_process/" class="nav-link">
  进程管理
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/5_schedule/" class="nav-link">
  调度算法
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/6_file_system/" class="nav-link">
  文件系统
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/7_device/" class="nav-link">
  设备管理
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/8_network_system/" class="nav-link">
  网络系统
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/9_linux_cmd/" class="nav-link">
  Linux命令
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/10_learn/" class="nav-link">
  学习心得
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><span class="title">网络</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络" class="mobile-dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/network/1_base/" class="nav-link">
  基础篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/network/2_http/" class="nav-link">
  HTTP篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/network/3_tcp/" class="nav-link">
  TCP篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/network/4_ip/" class="nav-link">
  IP篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/network/5_learn/" class="nav-link">
  学习心得
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/mysql/base/" class="nav-link">
  基础篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/index/" class="nav-link">
  索引篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/transaction/" class="nav-link">
  事务篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/lock/" class="nav-link">
  锁篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/log/" class="nav-link">
  日志篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/buffer_pool/" class="nav-link">
  内存篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="redis" class="dropdown-title"><span class="title">redis</span> <span class="arrow down"></span></button> <button type="button" aria-label="redis" class="mobile-dropdown-title"><span class="title">redis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/redis/base/" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/data_struct/" class="nav-link">
  数据类型
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/storage/" class="nav-link">
  持久化
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/module/" class="nav-link">
  功能篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/cluster/" class="nav-link">
  高可用
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/architecture/" class="nav-link">
  缓存
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java学习" class="dropdown-title"><span class="title">Java学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java学习" class="mobile-dropdown-title"><span class="title">Java学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/JavaLearning/Java基础/" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/interview/JavaLearning/Spring/" class="nav-link">
  Java进阶
</a></li></ul></div></div> <a href="https://github.com/Code-suphub/interview" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="操作系统" class="mobile-dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/os/1_hardware/" class="nav-link">
  硬件系统
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/2_os_structure/" class="nav-link">
  操作系统结构
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/3_memory/" class="nav-link">
  内存管理
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/4_process/" class="nav-link">
  进程管理
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/5_schedule/" class="nav-link">
  调度算法
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/6_file_system/" class="nav-link">
  文件系统
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/7_device/" class="nav-link">
  设备管理
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/8_network_system/" class="nav-link">
  网络系统
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/9_linux_cmd/" class="nav-link">
  Linux命令
</a></li><li class="dropdown-item"><!----> <a href="/interview/os/10_learn/" class="nav-link">
  学习心得
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><span class="title">网络</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络" class="mobile-dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/network/1_base/" class="nav-link">
  基础篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/network/2_http/" class="nav-link">
  HTTP篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/network/3_tcp/" class="nav-link">
  TCP篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/network/4_ip/" class="nav-link">
  IP篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/network/5_learn/" class="nav-link">
  学习心得
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/mysql/base/" class="nav-link">
  基础篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/index/" class="nav-link">
  索引篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/transaction/" class="nav-link">
  事务篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/lock/" class="nav-link">
  锁篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/log/" class="nav-link">
  日志篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/mysql/buffer_pool/" class="nav-link">
  内存篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="redis" class="dropdown-title"><span class="title">redis</span> <span class="arrow down"></span></button> <button type="button" aria-label="redis" class="mobile-dropdown-title"><span class="title">redis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/redis/base/" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/data_struct/" class="nav-link">
  数据类型
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/storage/" class="nav-link">
  持久化
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/module/" class="nav-link">
  功能篇
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/cluster/" class="nav-link">
  高可用
</a></li><li class="dropdown-item"><!----> <a href="/interview/redis/architecture/" class="nav-link">
  缓存
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java学习" class="dropdown-title"><span class="title">Java学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java学习" class="mobile-dropdown-title"><span class="title">Java学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/JavaLearning/Java基础/" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/interview/JavaLearning/Spring/" class="nav-link">
  Java进阶
</a></li></ul></div></div> <a href="https://github.com/Code-suphub/interview" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Cs Learn</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/cs_learn/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/interview/cs_learn/cs_learn.html" class="sidebar-link">学习计算机基础有什么推荐的书？</a></li><li><a href="/interview/cs_learn/feel_cs.html" aria-current="page" class="active sidebar-link">如何将计算机网络、操作系统、数据结构与算法、计算组成融会贯通？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/cs_learn/feel_cs.html#案例需求" class="sidebar-link">案例需求</a></li><li class="sidebar-sub-header"><a href="/interview/cs_learn/feel_cs.html#宕机判断算法的设计" class="sidebar-link">宕机判断算法的设计</a></li><li class="sidebar-sub-header"><a href="/interview/cs_learn/feel_cs.html#高并发架构的设计" class="sidebar-link">高并发架构的设计</a></li><li class="sidebar-sub-header"><a href="/interview/cs_learn/feel_cs.html#传输层协议的选择" class="sidebar-link">传输层协议的选择</a></li><li class="sidebar-sub-header"><a href="/interview/cs_learn/feel_cs.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/interview/cs_learn/look_book.html" class="sidebar-link">看书的一点小建议</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="如何将计算机网络、操作系统、数据结构与算法、计算组成融会贯通"><a href="#如何将计算机网络、操作系统、数据结构与算法、计算组成融会贯通" class="header-anchor">#</a> 如何将计算机网络、操作系统、数据结构与算法、计算组成融会贯通？</h1> <p>大家好，我是小林。</p> <p>有位关注我一年的读者找我，他去年关注我公众后，开始自学 CS，主要是计算机基础这一块。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/d3692e2197fb0d020ca4f13a4d3a1b42.png" alt="图片"></p> <p>他从那时起，就日复一日的学习，并在 Github 有做笔记的习惯，你看他的提交记录，每天都有，一天都没拉下，就这样坚持了一年。</p> <p>这个一年没有间断过的坚持，我是真的被震撼到，虽然我也经常肝文章，但是我也做不到每天都是学习的状态，总会想偷懒几天，毕竟学习真的是反人性的哈哈。</p> <p>这位读者去年的时候，也只是会用 python 输出 hello world 初学者，而如今能开始啃 Redis 源码了，并且还记录了学习 Redis 数据结构的源码笔记。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/459e34ac553f5c7d43b022c3bf132afc.png" alt="图片"></p> <p>我也跟他讨论了我学计算基础的感受，他也有相同的感受，看来是同道中人。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/28b130de1b3131bbb80255bdb8a525aa.png" alt="图片"></p> <p>之前有很多读者问我学计算机基础有啥用？不懂算法、计算机网络、操作系统这些东西，也可以完成工作上的 CRUD 业务开发，那为什么要花时间去学？</p> <p>是的，不懂这些，确实不会影响 CRUD 业务开发，对于这类业务开发的工作，难点是在于对业务的理解，但是门槛并不高，找个刚毕业人，让他花几个月时间熟悉业务和代码，他一样可以上手开发了，也就是说，单纯的 CRUD 业开发工作很快就会被体力更好的新人取代的。</p> <p>另外，在面对一些性能问题，如果没有计算机基础，我们是无从下手的，这时候程序员之间的分水岭就出来了。</p> <p><strong>今天，我不讲虚的东西。</strong></p> <p><strong>我以如何设计一个「*高性能的单机管理主机的心跳服务*」的方式，让大家感受计算基础之美，这里会涉及到数据结构与算法 + 操作系统 + 计算机组成 + 计算机网络这些知识。</strong></p> <p><img src="https://img-blog.csdnimg.cn/img_convert/1605e8908f606b4856cb2ab18783ea61.png" alt="图片"></p> <p>大家耐心看下去，你会发现原来计算机基础知识的用处，相信我，你会感触很深刻。</p> <hr> <h2 id="案例需求"><a href="#案例需求" class="header-anchor">#</a> 案例需求</h2> <p>后台通常是由多台服务器对外提供服务的，也就是所谓的集群。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/950f3c4267ec15a866d4d2eeae4c913d.png" alt="图片"></p> <p>如果集群中的某一台主机宕机了，我们必须要感知到这台主机宕机了，这样才做容灾处理，比如该宕机的主机的业务迁移到另外一台主机等等。</p> <p>那如何感知呢？那就需要<strong>心跳服务</strong>了。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/9f08aedac70921f6979ef9fd18c3efc3.png" alt="图片"></p> <p>要求每台主机都要向一台主机上报心跳包，这样我们就能在这台主机上看到每台主机的在线情况了。</p> <p>心跳服务主要做两件事情：</p> <ul><li><strong>发现宕机的主机</strong>；</li> <li><strong>发现上线的主机</strong>。</li></ul> <p>看上去感觉很简单，但是<strong>当集群达到十万，甚至百万台的时候，要实现一个可以能管理这样规模的集群的心跳服务进程，没点底层知识是无法做到的。</strong></p> <p>接下来，将从三个维度来设计这个心跳服务：</p> <ul><li>宕机判断算法的设计</li> <li>高并发架构的设计</li> <li>传输层协议的选择</li></ul> <h2 id="宕机判断算法的设计"><a href="#宕机判断算法的设计" class="header-anchor">#</a> 宕机判断算法的设计</h2> <p>这个心跳服务最关键是判断宕机的算法。</p> <p>如果采用暴力遍历所有主机的方式来找到超时的主机，在面对只有几百台主机的场景是没问题，但是这个算法会随着主机越多，算法复杂度也会上升，程序的性能也就会急剧下降。</p> <p>所以，我们应该设计一个可以应对超大集群规模的宕机判断算法。</p> <p>我们先来思考下，心跳包应该有什么数据结构来管理？</p> <p>心跳包里的内容是有主机上报的时间信息的，也就是有时间关系的，那么可以<strong>用「双向链表」构成先入先出的队列</strong>，这样就保存了心跳包的时序关系。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/6b91f788ed74f2ec673e1e9951439e39.png" alt="图片"></p> <p><strong>由于采用的数据结构是双向链表，所以队尾插入和队头删除操作的时间复杂度是 O(1)。</strong></p> <p>如果有新的心跳包，则将其插入到双向链表的尾部，那么最老的心跳包就是在双向链表的头部，这样在寻找宕机的主机时，只要看双向链表头部最老的心跳包，距现在是否超过 5 秒，如果超过 5 秒 则认为该主机宕机，然后将其从双向链表中删除。</p> <p>细心的同学肯定发现了个问题，就是如果一个主机的心跳包已经在队列中，那么下次该主机的心跳包要怎么处理呢？</p> <p>为了维持队列里的心跳包是主机最新上报的，所以要先找到该主机旧的心跳包，然后将其删除，再把新的心跳包插入到双向链表的队尾。</p> <p>问题来了，在队列找到该主机旧的心跳包，<strong>由于数据结构是双向链表，所以这个查询过程的时间复杂度时 O(N)</strong>，也就是说随着队列里的元素越多，会越影响程序的性能，这一点我们必须优化。</p> <p><strong>查询效率最好的数据结构就是「哈希表」了，时间复杂度只有 O(1)</strong>，因此我们可以加入这个数据结构来优化。</p> <p>哈希表的 Key 是主机的 IP 地址，Value 包含<strong>主机在双向链表里的节点</strong>，这样我们就可以通过哈希表轻松找到该主机在双向链表中的位置。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/4eb462ff8fc7ca8333d58097cbafd1a6.png" alt="图片"></p> <p>这样，每当收到心跳包时，先判断其在不在哈希表里。</p> <ul><li>如果不存在哈希表里，说明是新主机上线，<strong>先将其插入到双向链表的尾部，然后将该主机的 IP 作为 Key，主机在双向链表的节点作为 Value 插入到哈希表</strong>。</li> <li>如果存在哈希表里，说明主机已经上线过，<strong>先通过查询哈希表，找到该主机在双向链表里旧的心跳包的节点，然后就可以通过该节点将其从双向链表中删除，最后将新的心跳包插入到双向链表的队尾，同时更新哈希表</strong>。</li></ul> <p>可以看到，上面这些操作全都是 O(1)，不管集群规模多大，时间复杂度都不会增加，但是代价就是内存占用会越多，这个就是以<strong>空间换时间</strong>的方式。</p> <p>有个细节的问题，不知道大家发现了没有，就是为什么队列的数据结构采用双向链表，而不是单向链表？</p> <p>因为双向链表比单向链表多了个 pre 的指针，可以通过其找到上一个节点，那么在删除中间节点的时候，就可以直接删除，而<strong>如果是单向链表在删除中间的时候，我们得先通过遍历找到需被删除节点的上一个节点，才能完成删除操作，这里中间多了个遍历操作</strong>。</p> <p>既然引入哈希表，那我们在判断出有主机宕机了（检查双向链表队头的主机是否超时），<strong>除了要将其从双向链表中删除，也要从哈希表中删除</strong>。要将主机从哈希表删除，首先我们要知道主机的 IP，因为这是哈希表的 Key。</p> <p>双向链表存储的内容必须包含主机的 IP 信息，那<strong>为了更快查询到主机的 IP，双向链表存储的内容可以是一个键值对（Key-Value），其 Key 就是主机的 IP，Value 就是主机的信息。</strong></p> <p><img src="https://img-blog.csdnimg.cn/img_convert/afb535960d1b9fb6bd19611111b2c139.png" alt="图片"></p> <p>这样，在发现双向链表中头部的节点超时了，由于节点的内容是键值对，于是就能快速地从该节点获取主机的 IP，知道了主机的 IP 信息，就能把哈希表中该主机信息删除。</p> <p>至此，就设计出了一个高性能的宕机判断算法，主要用了数据结构：哈希表 + 双向链表，通过这个组合，查询 + 删除 + 插入操作的时间复杂度都是 O(1)，以空间换时间的思想，这就是<strong>数据结构与算法之美</strong>！</p> <p>熟悉算法的同学应该感受出来了，上面这个算法就是<strong>类 LRU 算法</strong>，用于<strong>淘汰最近最久使用的元素</strong>的场景，该算法应用范围很广的，操作系统、Redis、MySQL 都有使用该算法。</p> <p>在很多大厂面试的时候，经常会考察 LRU 算法，甚至会要求手写出来，后面我在写一篇 LRU 算法实现的文章。</p> <h2 id="高并发架构的设计"><a href="#高并发架构的设计" class="header-anchor">#</a> 高并发架构的设计</h2> <p>设计完高效的宕机判断算法后，我们来设计个能充分利用服务器资源的架构，以应对高并发的场景。</p> <p>首先第一个问题，选用单线程还是多线程模式？</p> <p>选用单线程的话，意味着程序只能利用一个 CPU 的算力，如果 CPU 是一颗 1GHZ 主频的 CPU，意味着一秒钟只有 10 亿个时钟周期可以工作，如果要让心跳服务程序每秒接收到 100 万心跳包，那么就要求它必须在 1000 个时时钟周期内处理完一个心跳包。</p> <p>这是无法做到的，因为一个汇编指令的执行需要多个时钟周期，更何况高级语言的一条语句是由多个汇编指令构成的，而且这个 1000 个时钟周期还要包含内核从网卡上读取报文，以及协议栈的报文分析。</p> <p>因此，采用单线程模式会出现算力不足的情况，意味着在百万级的心跳场景下，容易出现内核缓冲区的数据无法被即使取出而导致溢出的现象，然后就会出现大量的丢包。</p> <p>所以，我们要选择多进程或者多线程的模式，来充分利用多核的 CPU 资源。多进程的优势是进程间互不干扰，但是内存不共享，进程间通信比较麻烦，<strong>因此采用多线程模式开发会更好一些，多线程间可以共享数据。</strong></p> <p>多线程体现在「分发线程是多线程和工作线程是多线程」，决定了多线程开发模式后，我们还需要解决五个问题。</p> <h4 id="第一个多路复用"><a href="#第一个多路复用" class="header-anchor">#</a> 第一个多路复用</h4> <p>我们应该使用多路复用技术来服务多个客户端，而且是要<strong>使用 epoll</strong>。</p> <p>因为 select 和 poll 的缺陷在于，当客户端越多，也就是 Socket 集合越大，Socket 集合的遍历和拷贝会带来很大的开销；</p> <p>而 epoll 的方式即使监听的 Socket 数量越多的时候，效率不会大幅度降低，能够同时监听的 Socket 的数目也非常的多了。</p> <p>多路复用更详细的介绍，可以看之前这篇文章：<a href="https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;mid=2247489558&amp;idx=1&amp;sn=7a96604032d28b8843ca89cb8c129154&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">这次答应我，一举拿下 I/O 多路复用！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="第二个负载均衡"><a href="#第二个负载均衡" class="header-anchor">#</a> 第二个负载均衡</h4> <p>在收到心跳包后，我们应该要将心跳包均匀分发到不同的工作线程上处理。</p> <p>分发的规则可以用哈希函数，这样在接收到心跳包后，解析出主机的 IP 地址，然后通过哈希函数分发给工作线程处理。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/da0477685f5310bbf44b3a65aa755504.png" alt="图片"></p> <p>于是<strong>每个工作线程只会处理特定主机的心跳包，多个工作线程间互不干扰，不用在多个工作线程间加锁，从而实现了无锁编程</strong>。</p> <h4 id="第三个多线程同步"><a href="#第三个多线程同步" class="header-anchor">#</a> 第三个多线程同步</h4> <p>分发线程和工作线程之间可以加个消息队列，形成「生产者 - 消费者」模型。</p> <p>分发线程负责将接收到的心跳包加入到队列里，工作线程负责从队列取出心跳包做进一步的处理。</p> <p>除此之外，还需要做如下两点。</p> <p>第一点，工作线程一般是多于分发线程，<strong>给每一个工作线程都创建独立的缓冲队列</strong>。</p> <p>第二点，缓冲队列是会被分发线程和工作线程同时操作，所以在操作该队列要加锁，为了避免线程获取锁失而主动放弃 CPU，可以<strong>选择自旋锁，因为自旋锁在获取锁失败后，CPU 还在执行该线程，只不过 CPU 在空转，效率比互斥锁高</strong>。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/b63f3afb0bf1db3811f78a7cae8b16ca.png" alt="图片"></p> <p>更多关于锁的讲解可以看这篇：「<a href="https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;mid=2247485583&amp;idx=1&amp;sn=412546e55f9f5cf394bdda633fcc2b1c&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">互斥锁、自旋锁、读写锁、悲观锁、乐观锁的应用场景<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>」</p> <h4 id="第四个线程绑定-cpu"><a href="#第四个线程绑定-cpu" class="header-anchor">#</a> 第四个线程绑定 CPU</h4> <p>现代 CPU 都是多核心的，线程可能在不同 CPU 核心来回切换执行，这对 CPU Cache 不是有利的，虽然 L3 Cache 是多核心之间共享的，但是 L1 和 L2 Cache 都是每个核心独有的。</p> <p><strong>如果一个线程在不同核心来回切换，各个核心的缓存命中率就会受到影响</strong>，相反如果线程都在同一个核心上执行，那么其数据的 L1 和 L2 Cache 的缓存命中率可以得到有效提高，缓存命中率高就意味着 CPU 可以减少访问 内存的频率。</p> <p>当有多个同时执行「计算密集型」的线程，为了防止因为切换到不同的核心，而导致缓存命中率下降的问题，我们可以把<strong>线程绑定在某一个 CPU 核心上</strong>，这样性能可以得到非常可观的提升。</p> <p>在 Linux 上提供了 <code>sched_setaffinity</code> 方法，来实现将线程绑定到某个 CPU 核心这一功能。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/e43def3d28d7bf38c58447782d07b560.png" alt="图片"></p> <p>更多关于 CPU Cache 的介绍，可以看这篇：「<a href="https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;mid=2247486022&amp;idx=1&amp;sn=8bb5a066d81f77523a06cd09251055da&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">如何写出让 CPU 跑得更快的代码？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>」</p> <h4 id="第五个内存分配器"><a href="#第五个内存分配器" class="header-anchor">#</a> 第五个内存分配器</h4> <p>Linux 默认的内存分配器是 PtMalloc2，它有一个缺点在申请小内存和多线程的情况下，申请内存的效率并不高。</p> <p>后来，Google 开发的 TCMalloc 内存分配器就解决这个问题，<strong>它在多线程下分配小内存的速度要快很多</strong>，所以对于心跳服务应当改用 TCMalloc 申请内存。</p> <p>下图是 TCMalloc 作者给出的性能测试数据，可以看到线程数越多，二者的速度差距越大，<strong>显然 TCMalloc 更具有优势。</strong></p> <p><img src="https://img-blog.csdnimg.cn/img_convert/ecbde763ec855f0d08ce0785afb040f8.png" alt="图片"></p> <p>我暂时就想到这么多了，<strong>这里每一个点都跟「计算机组成和操作系统」知识密切相关</strong>。</p> <h2 id="传输层协议的选择"><a href="#传输层协议的选择" class="header-anchor">#</a> 传输层协议的选择</h2> <p>心跳包的传输层协议应该是选 TCP 和 UDP 呢？</p> <p>对于传输层协议的选择，我们要看<strong>心跳包的长度大小</strong>。</p> <p>如果长度小于 MTU，那么可以选择 UDP 协议，因为 UDP 协议没那么复杂，而且心跳包也不是一定要完全可靠传输，如果中途发生丢包，下一次心跳包能收到就行。</p> <p>如果长度大于 MTU，就要选择 TCP 了，因为 UDP 在传送大于 1500 字节的报文，IP 协议就会把报文拆包后再发到网络中，并在接收方组装回原来的报文，然而，IP 协议并不擅长做这件事，拆包组包的效率很低。</p> <p>所以，<strong>TCP 协议就选择自己做拆包组包的事情，当心跳包的长度大于 MSS 时就会在 TCP 层拆包，且保证 TCP 层拆包的报文长度不会 MTU</strong>。</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/7e88ec21809ce5601527ca81e9944384.png" alt="图片">MTU 与 MSS</p> <p>选择了 TCP 协议后，我们还要解决一些事情，因为 TCP 协议是复杂的。</p> <p>首先，要让服务器能支持更多的 TCP 连接，TCP 连接是通过<strong>四元组</strong>唯一确认的，也就是**「源 IP、目的 IP、源端口、目的端口」**。</p> <p>那么当服务器 IP 地址（目的 IP）和监听端口（目标端口）固定时，变化的只有源 IP（2^32）和源端口（2^16），因此理论上服务器最大能连接 <code>2^(32+16)</code> 个客户端。</p> <p>这只是理论值，实际上服务器的资源肯定达不到那么多连接。Linux 系统一切皆文件，所以 TCP 连接也是文件，那么服务器要增大下面这两个地方的最大文件句柄数：</p> <ul><li>通过 <code>ulimit</code> 命令增大单进程允许最大文件句柄数；</li> <li>通过 <code>/proc/sys/fs/file-nr</code> 增大系统允许最大文件句柄数。</li></ul> <p>另外，TCP 协议的默认内核参数并不适应高并发的场景，所以我们还得在下面这四个方向通过调整内核参数来优化 TCP 协议：</p> <ul><li>三次握手过程需要优化；</li> <li>四次挥手过程需要优化：</li> <li>TCP 缓冲区要根据网络带宽时延积设置；</li> <li>需要优化；</li></ul> <p>前三个的优化的思路，我在之前的文章写过，详见：「<a href="https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;mid=2247484774&amp;idx=1&amp;sn=fa9e67e60c5f9d2e9d2aa6ea8ab2a441&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">面试官：换人！他连 TCP 这几个参数都不懂<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>」</p> <p>这里简单说一下优化拥塞控制算法的思路。</p> <p>传统的拥塞控制分为四个部分：慢启动、拥塞避免、快速重传、快速恢复，如下图：</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/930207409b70829914a5c4ee39a5f807.png" alt="图片">TCP 拥塞控制</p> <p>当 TCP 连接建立成功后，拥塞控制算法就会发生作用，首先进入慢启动阶段。决定连接此时网速的是初始拥塞窗口，默认值是 <code>10 MSS</code>。</p> <p>在带宽时延积较大的网络中，应当调高初始拥塞窗口，比如 <code>20 MSS</code> 或 <code>30 MSS</code>，Linux 上可以通过 <code>route ip change</code> 命令修改它。</p> <p><strong>传统的拥塞控制算法是基于丢包作为判断拥塞的依据</strong>。不过实际上，网络刚出现拥塞时并不会丢包，而真的出现丢包时，拥塞已经非常严重了，比如像理由器里都有缓冲队列应对突发流量：</p> <p><img src="https://img-blog.csdnimg.cn/img_convert/2f9a1866b956d767bbe8a97e4ca9b48f.png" alt="图片"></p> <p>上图中三种情况：</p> <ul><li>当缓冲队列为空时，传输速度最快；</li> <li>当缓冲队列开始有报文挤压，那么网速就开始变慢了，也就是网络延时变高了；</li> <li>当缓冲队列溢出时，就出现了丢包现象。</li></ul> <p>传统的拥塞控制算法就是在第三步这个时间点进入拥塞避免阶段，显然已经很晚了。</p> <p>其实进行拥塞控制的最佳时间点，是缓冲队列刚出现积压的时刻，也就是第二步。</p> <p>Google 推出的 <strong>BBR 算法是以测量带宽、时延来确定拥塞的拥塞控制算法</strong>，能提高网络环境的质量，减少网络延迟和降低丢包率。</p> <p>Linux 4.9 版本之后都支持 BBR 算法，开启 BBR 算法的方式：</p> <div class="language-plain line-numbers-mode"><pre class="language-plain"><code>net.ipv4.tcp_congestion_control=bbr
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里的每一个知识都涉及到了计算机网络，这就是<strong>计算机网络之美</strong>！</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>掌握好数据结构与算法，才能设计出高效的宕机判断算法，本文我们采用哈希表 + 双向链表实现了类 LRU 算法。</p> <p>掌握好计算组成 + 操作系统，才能设计出高性能的架构，本文我们采用多线程模式来充分利用 CPU 资源，还需要考虑 IO 多路服用的选择，锁的选择，消息队列的引入，内存分配器的选择等等。</p> <p>掌握好计算机网络，才能选择契合场景的传输协议，如果心跳包长度大于 MTU，那么选择 TCP 更有利，但是 TCP 是个复杂的协议，在高并发的场景下，需要对 TCP 的每一个阶段需要优化。如果如果心跳包长度小于 MTU，且不要求可靠传输时，UDP 协议是更好的选择。</p> <p>怎么样？</p> <p>是不是感动到了计算机基础之美。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Code-suphub/interview/edit/master/cs_learn/feel_cs.md" target="_blank" rel="noopener noreferrer">完善页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后一次更新:</span> <span class="time">5/30/2024, 10:37:51 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview/cs_learn/cs_learn.html" class="prev">
        学习计算机基础有什么推荐的书？
      </a></span> <span class="next"><a href="/interview/cs_learn/look_book.html">
        看书的一点小建议
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/interview/assets/js/app.c813ac80.js" defer></script><script src="/interview/assets/js/2.181747c8.js" defer></script><script src="/interview/assets/js/1.1f95d45d.js" defer></script><script src="/interview/assets/js/41.97ae5640.js" defer></script>
  </body>
</html>
